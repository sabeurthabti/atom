Object.defineProperty(exports, '__esModule', {
  value: true
});
exports.getRuntimeInformation = getRuntimeInformation;

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

var _object = require('./object');

var _clientInfo = require('./clientInfo');

var _systemInfo = require('./systemInfo');

var _environment = require('./environment');

var _environment2 = _interopRequireDefault(_environment);

var _session = require('./session');

var _session2 = _interopRequireDefault(_session);

'use babel';

var cachedInformation = null;

function getCacheableRuntimeInformation() {
  if (cachedInformation !== null) {
    return cachedInformation;
  }

  cachedInformation = {
    sessionId: '',
    user: _environment2['default'].USER,
    osType: (0, _systemInfo.getOsType)(),
    timestamp: 0,
    isClient: (0, _clientInfo.isRunningInClient)(),
    atomVersion: (0, _clientInfo.isRunningInClient)() ? (0, _clientInfo.getAtomVersion)() : '',
    isRunningInNuclide: (0, _clientInfo.isRunningInNuclide)(),
    nuclideVersion: (0, _clientInfo.isRunningInNuclide)() ? (0, _clientInfo.getNuclideBuildNumber)() : 0,
    // TODO (chenshen) fill following information.
    installerPackageVersion: 0,
    isDevelopment: false,
    serverVersion: 0
  };

  return cachedInformation;
}

function getRuntimeInformation() {
  var runtimeInformation = (0, _object.assign)({}, getCacheableRuntimeInformation());
  runtimeInformation.sessionId = _session2['default'].id;
  runtimeInformation.timestamp = Date.now();
  return runtimeInformation;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi92YXIvZm9sZGVycy93MS9fMm1jNm0wNTBxbjIzMm5wc2Y5ejNoZnNoNThfamgvVC90bXBpMzV6akdwdWJsaXNoX3BhY2thZ2VzL25wbS9udWNsaWRlLWNvbW1vbnMvbGliL3J1bnRpbWVJbmZvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztzQkFXcUIsVUFBVTs7MEJBTXhCLGNBQWM7OzBCQUNHLGNBQWM7OzJCQUNkLGVBQWU7Ozs7dUJBQ25CLFdBQVc7Ozs7QUFwQi9CLFdBQVcsQ0FBQzs7QUFvQ1osSUFBSSxpQkFBaUIsR0FBRyxJQUFJLENBQUM7O0FBRTdCLFNBQVMsOEJBQThCLEdBQXVCO0FBQzVELE1BQUksaUJBQWlCLEtBQUssSUFBSSxFQUFFO0FBQzlCLFdBQU8saUJBQWlCLENBQUM7R0FDMUI7O0FBRUQsbUJBQWlCLEdBQUc7QUFDbEIsYUFBUyxFQUFFLEVBQUU7QUFDYixRQUFJLEVBQUUseUJBQVksSUFBSTtBQUN0QixVQUFNLEVBQUUsZ0JBNUJKLFNBQVMsR0E0Qk07QUFDbkIsYUFBUyxFQUFFLENBQUM7QUFDWixZQUFRLEVBQUUsZ0JBakNaLGlCQUFpQixHQWlDYztBQUM3QixlQUFXLEVBQUUsZ0JBbENmLGlCQUFpQixHQWtDaUIsR0FBRyxnQkFwQ3JDLGNBQWMsR0FvQ3VDLEdBQUcsRUFBRTtBQUN4RCxzQkFBa0IsRUFBRSxnQkFsQ3RCLGtCQUFrQixHQWtDd0I7QUFDeEMsa0JBQWMsRUFBRSxnQkFuQ2xCLGtCQUFrQixHQW1Db0IsR0FBRyxnQkFyQ3pDLHFCQUFxQixHQXFDMkMsR0FBRyxDQUFDOztBQUVsRSwyQkFBdUIsRUFBRSxDQUFDO0FBQzFCLGlCQUFhLEVBQUUsS0FBSztBQUNwQixpQkFBYSxFQUFFLENBQUM7R0FDakIsQ0FBQzs7QUFFRixTQUFPLGlCQUFpQixDQUFDO0NBQzFCOztBQUVNLFNBQVMscUJBQXFCLEdBQXVCO0FBQzFELE1BQUksa0JBQWtCLEdBQUcsWUFuRG5CLE1BQU0sRUFtRG9CLEVBQUUsRUFBRSw4QkFBOEIsRUFBRSxDQUFDLENBQUM7QUFDdEUsb0JBQWtCLENBQUMsU0FBUyxHQUFHLHFCQUFRLEVBQUUsQ0FBQztBQUMxQyxvQkFBa0IsQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQzFDLFNBQU8sa0JBQWtCLENBQUM7Q0FDM0IiLCJmaWxlIjoiL3Zhci9mb2xkZXJzL3cxL18ybWM2bTA1MHFuMjMybnBzZjl6M2hmc2g1OF9qaC9UL3RtcGkzNXpqR3B1Ymxpc2hfcGFja2FnZXMvbnBtL251Y2xpZGUtY29tbW9ucy9saWIvcnVudGltZUluZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGJhYmVsJztcbi8qIEBmbG93ICovXG5cbi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTUtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgbGljZW5zZSBmb3VuZCBpbiB0aGUgTElDRU5TRSBmaWxlIGluXG4gKiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG5pbXBvcnQge2Fzc2lnbn0gZnJvbSAnLi9vYmplY3QnO1xuaW1wb3J0IHtcbiAgZ2V0QXRvbVZlcnNpb24sXG4gIGdldE51Y2xpZGVCdWlsZE51bWJlcixcbiAgaXNSdW5uaW5nSW5DbGllbnQsXG4gIGlzUnVubmluZ0luTnVjbGlkZSxcbn0gZnJvbSAnLi9jbGllbnRJbmZvJztcbmltcG9ydCB7Z2V0T3NUeXBlfSBmcm9tICcuL3N5c3RlbUluZm8nO1xuaW1wb3J0IGVudmlyb25tZW50IGZyb20gJy4vZW52aXJvbm1lbnQnO1xuaW1wb3J0IHNlc3Npb24gZnJvbSAnLi9zZXNzaW9uJztcblxuZXhwb3J0IHR5cGUgUnVudGltZUluZm9ybWF0aW9uID0ge1xuICBzZXNzaW9uSWQ6IHN0cmluZztcbiAgdXNlcjogc3RyaW5nO1xuICBvc1R5cGU6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGlzQ2xpZW50OiBib29sZWFuO1xuICBpc0RldmVsb3BtZW50OiBib29sZWFuO1xuICBpc1J1bm5pbmdJbk51Y2xpZGU6IGJvb2xlYW47XG4gIGF0b21WZXJzaW9uOiBzdHJpbmc7XG4gIG51Y2xpZGVWZXJzaW9uOiBudW1iZXI7XG4gIGluc3RhbGxlclBhY2thZ2VWZXJzaW9uOiBudW1iZXI7XG4gIHNlcnZlclZlcnNpb246IG51bWJlcjtcbn07XG5cbnZhciBjYWNoZWRJbmZvcm1hdGlvbiA9IG51bGw7XG5cbmZ1bmN0aW9uIGdldENhY2hlYWJsZVJ1bnRpbWVJbmZvcm1hdGlvbigpOiBSdW50aW1lSW5mb3JtYXRpb24ge1xuICBpZiAoY2FjaGVkSW5mb3JtYXRpb24gIT09IG51bGwpIHtcbiAgICByZXR1cm4gY2FjaGVkSW5mb3JtYXRpb247XG4gIH1cblxuICBjYWNoZWRJbmZvcm1hdGlvbiA9IHtcbiAgICBzZXNzaW9uSWQ6ICcnLFxuICAgIHVzZXI6IGVudmlyb25tZW50LlVTRVIsXG4gICAgb3NUeXBlOiBnZXRPc1R5cGUoKSxcbiAgICB0aW1lc3RhbXA6IDAsXG4gICAgaXNDbGllbnQ6IGlzUnVubmluZ0luQ2xpZW50KCksXG4gICAgYXRvbVZlcnNpb246IGlzUnVubmluZ0luQ2xpZW50KCkgPyBnZXRBdG9tVmVyc2lvbigpIDogJycsXG4gICAgaXNSdW5uaW5nSW5OdWNsaWRlOiBpc1J1bm5pbmdJbk51Y2xpZGUoKSxcbiAgICBudWNsaWRlVmVyc2lvbjogaXNSdW5uaW5nSW5OdWNsaWRlKCkgPyBnZXROdWNsaWRlQnVpbGROdW1iZXIoKSA6IDAgLFxuICAgIC8vIFRPRE8gKGNoZW5zaGVuKSBmaWxsIGZvbGxvd2luZyBpbmZvcm1hdGlvbi5cbiAgICBpbnN0YWxsZXJQYWNrYWdlVmVyc2lvbjogMCxcbiAgICBpc0RldmVsb3BtZW50OiBmYWxzZSxcbiAgICBzZXJ2ZXJWZXJzaW9uOiAwLFxuICB9O1xuXG4gIHJldHVybiBjYWNoZWRJbmZvcm1hdGlvbjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJ1bnRpbWVJbmZvcm1hdGlvbigpOiBSdW50aW1lSW5mb3JtYXRpb24ge1xuICB2YXIgcnVudGltZUluZm9ybWF0aW9uID0gYXNzaWduKHt9LCBnZXRDYWNoZWFibGVSdW50aW1lSW5mb3JtYXRpb24oKSk7XG4gIHJ1bnRpbWVJbmZvcm1hdGlvbi5zZXNzaW9uSWQgPSBzZXNzaW9uLmlkO1xuICBydW50aW1lSW5mb3JtYXRpb24udGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgcmV0dXJuIHJ1bnRpbWVJbmZvcm1hdGlvbjtcbn1cbiJdfQ==
